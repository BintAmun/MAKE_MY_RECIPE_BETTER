<div class="container" data-controller="bookmark">
 <div class="row row-cols-lg-4 row-cols-md-2 row-cols-sm-2">
    <% @recipes.each do |recipe| %>
      <div class="card-recipe">
          <div class="card m-2 col">
            <%= cl_image_tag recipe.photo.key, class: "card-img-top" %>

            <div data-bookmark-target="bookmark-checker">
            <% bookmark = Bookmark.find_by(user: current_user, recipe: recipe) %> 
              <a data-action="click->bookmark#addToFavourites" class=<%= "heart" if bookmark %>>
                <% if bookmark %>
                  <i class="fa-solid fa-heart bookmark-checker"></i>
                <% else %>
                  <i class="fa-regular fa-heart bookmark-checker"></i>
                <% end %>
              </a> 

            <div data-hello-target="bookmark-button">
            <button data-action="click->hello#addToFavourites"><i class="fa-regular fa-heart bookmark-checker"></i> </button>

            </div>
            <div class="card-body">
              <h5 class="card-text"><strong><%= link_to recipe.name, recipe_path(recipe) %></strong></h5></div>
              <div class="average-score mb-3 d-flex justify-content-end">
                <div class="star-rating ml-1">
                  <div class="star-rating-front" style="width: <%= recipe.avg_score_percentage %>%">★★★★★</div>
                  <div class="star-rating-back">★★★★★</div>
                </div>
              </div>
            </div>
      </div>
    <% end %>
  </div>
</div>
